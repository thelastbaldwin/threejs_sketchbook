<!DOCTYPE html>
<html>
<head>
	<title>zella text test</title>
	<script src="js/third_party/three.min.js"></script>
	<script src="js/third_party/jquery-2.1.1.min.js"></script>
	<script src="js/third_party/stats.min.js"></script>
	<script src="js/fonts/interstate_regular.typeface.js"></script>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div id="Stats-output"></div>
	<div id="WebGL-output"></div>
	<script>
		var phrases = [
			{
				green: 'STRONG IS',
				red: 'STYLISH'
			},
			{
				green: 'PASSION IS',
				red: 'POWER'
			},
			{
				green: 'COURAGE IS',
				red: 'CONTAGIOUS'
			},
			{
				green: 'ZONE',
				red: 'ZELLA'
			}
		];

		var camera,
		parent,
		greenText,
		redText,
		spotlight,
		scene,
		speed = 0.25;

		$(function(){
			scene = new THREE.Scene();
			var clock = new THREE.Clock({autostart: true});

			parent = new THREE.Object3D();
			parent.position.x = 0;
			parent.position.y = 0;
			parent.position.z = 0;

			camera = new THREE.PerspectiveCamera(45, window.innerWidth/ window.innerHeight, 0.1, 2000);
			//camera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, -500, 500 );
			camera.position.x = 0;
			camera.position.y = 0;
			camera.position.z = 1000;
			parent.add(camera);
			

			var renderer = new THREE.WebGLRenderer();
			renderer.setClearColor(0xFFFFFF);
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.shadowMapEnabled = true;
			renderer.shadowMapSoft = true;

			/*var axes = new THREE.AxisHelper(150);
			scene.add(axes);
*/
			spotlight = new THREE.SpotLight(0xffffff);
			spotlight.position.set(0, -30, 500);
			spotlight.castShadow = true;
			spotlight.shadowDarkness = 0.4;
			// spotlight.shadowMapWidth = 2048;
			// spotlight.shadowMapHeight = 2048;
			parent.add(spotlight);

			var planeSize = 360;
			var planeTexture = THREE.ImageUtils.loadTexture('img/zella_pattern_256.jpg');
			planeTexture.wrapT = THREE.RepeatWrapping;
			planeTexture.offset.y = 0.1;
			var planeGeometry = new THREE.PlaneGeometry(planeSize, planeSize, 32, 32);
			var planeMaterial = new THREE.MeshBasicMaterial({map: planeTexture});
			var plane = new THREE.Mesh(planeGeometry, planeMaterial);
			plane.receiveShadow = true;
			plane.position.z = 180;
			plane.rotation.z = Math.PI;
			parent.add(plane);
			scene.add(parent);

			var ambientLight = new THREE.AmbientLight(0x333333);
			scene.add(ambientLight);

			var greenTextOptions = {
				size: 24,
				height: 2,
				font: 'interstate',
				style: 'normal'
			},
			greenTextMaterial = new THREE.MeshLambertMaterial({
				color: 0xBCDE16
			}), 
			redTextOptions = {
				size: greenTextOptions.size * 0.56,
				height: 2,
				font: 'interstate',
				style: 'normal'
			},redTextMaterial = new THREE.MeshPhongMaterial({
				color: 0xE33C2D
			}),
			greenTextGeometries = [
				new THREE.TextGeometry(phrases[0].green, greenTextOptions),
				new THREE.TextGeometry(phrases[1].green, greenTextOptions),
				new THREE.TextGeometry(phrases[2].green, greenTextOptions),
				new THREE.TextGeometry(phrases[3].green, greenTextOptions)
			],
			greenTexts = [
				new THREE.Mesh(greenTextGeometries[0], greenTextMaterial),
				new THREE.Mesh(greenTextGeometries[1], greenTextMaterial),
				new THREE.Mesh(greenTextGeometries[2], greenTextMaterial),
				new THREE.Mesh(greenTextGeometries[3], greenTextMaterial)
			],
			redTextGeometries = [
				new THREE.TextGeometry(phrases[0].red, redTextOptions),
				new THREE.TextGeometry(phrases[1].red, redTextOptions),
				new THREE.TextGeometry(phrases[2].red, redTextOptions),
				new THREE.TextGeometry(phrases[3].red, redTextOptions)
			],
			redTexts = [
				new THREE.Mesh(redTextGeometries[0], redTextMaterial),
				new THREE.Mesh(redTextGeometries[1], redTextMaterial),
				new THREE.Mesh(redTextGeometries[2], redTextMaterial),
				new THREE.Mesh(redTextGeometries[3], redTextMaterial)
			];

			var rotation,
			rTranslation,
			gTranslation;
			for(var i = 0; i < 4; i++){
				greenTexts[i].castShadow = true;
				redTexts[i].castShadow = true;
				rotation = new THREE.Matrix4().makeRotationY(i * Math.PI/2);
				greenTexts[i].applyMatrix(rotation);
				redTexts[i].applyMatrix(rotation);
				switch(i){
					case 0:
						//Strong is Stylish
						gTranslation = new THREE.Matrix4().makeTranslation(-90, 10, 200);
						rTranslation = new THREE.Matrix4().makeTranslation(-30, -10, 205);
						break;
					case 1:
						//Passion is Power
						gTranslation = new THREE.Matrix4().makeTranslation(200, 10, 90);
						rTranslation = new THREE.Matrix4().makeTranslation(205, -10, 40);
						break;
					case 2:
						//Courage is Contagious 
						gTranslation = new THREE.Matrix4().makeTranslation(90, 10, -200);
						rTranslation = new THREE.Matrix4().makeTranslation(40, -10, -205);
						break;
					case 3:
						//Zone Zella
						gTranslation = new THREE.Matrix4().makeTranslation(-200, 10, -70);
						rTranslation = new THREE.Matrix4().makeTranslation(-205, -10, -50);
						break;
				}
				greenTexts[i].applyMatrix(gTranslation);
				redTexts[i].applyMatrix(rTranslation);
				scene.add(greenTexts[i]);
				scene.add(redTexts[i]);
			}

			camera.setLens(100, 35);

			$('#WebGL-output').append(renderer.domElement);

			function updateCameraPosition(){
				parent.position.x = 1 * Math.sin(clock.getElapsedTime() * speed);
				parent.position.z = 1 * Math.cos(clock.getElapsedTime() * speed);
				parent.lookAt(scene.position);
			}

			function renderScene(){
				requestAnimationFrame(renderScene);
				renderer.render(scene, camera);
				updateCameraPosition();
				planeTexture.offset.y	+= speed * 0.0075;
			planeTexture.offset.y	%= 1;
			planeTexture.needsUpdate	= true;
			}

			renderScene();
		});
	</script>
</body>
</html>